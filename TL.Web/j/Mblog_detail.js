var id = 0; $(function () { id = parastrtrans("id"); $("#tid").val(id); $(".top_count > b").html("(" + $("#info_reply .list li").length + ")"); if ($("#info_reply .list li").length == 0) { $("#info_reply .top_reply_bg,#info_reply > .content").hide() } $(".topic_tool .close").click(function () { $("#left").a({ marginLeft: 120 }, 300) }); $("#right").r((getBrowserSize().w - 1024) / 2); $("#reply_form").form({ onSubmit: function () { if (!$("#replyContent").val()) { alert("请填写评论内容！"); return false } }, success: function (a) { if (a == "1") { $("#replyContent").val(""); alert("评论成功!"); window.location.href = window.location.href } else { alert("评论失败!") } } }); $("#reply_form .btn_submit").click(function () { $("#reply_form").submit() }); $("#r_More").toggle(function () { $(".r_More_info").stop().show() }, function () { $(".r_More_info").stop().hide() }); bind_emotion(); $(".addFace").afterbind("click", function (a) { $(".reply-emotion").css({ left: getMousePos(a).x + "px", top: getMousePos(a).y + 25 + "px" }).fadeIn(400) }); $(".reply-emotion ul img").afterbind("click", function (a) { var b = $("#replyContent"); b.val(b.val() + "[" + $(this).attr("url") + "]"); $(".reply-emotion").hide() }); $(".reply-emotion-close").afterbind("click", function (a) { $(".reply-emotion").fadeOut(400) }); $.tl_slider = function (i) { var d = { slider: ".reply-emotion-content > ul", slider_num: ".reply-emotion-header > ul" }; var c = $.extend(d, i); var a = c.slider; var b = c.slider_num; var f = $(b + " > li").length; var g = 0; var e; $(a + " > li").afterbind("click", function (k) { var j = $(a + " > li").index(this); $(b + " > li").eq(j).mousemove() }); $(b + " > li").afterbind("click", function (j) { g = $(b + " > li").index(this); h(g) }).eq(0).click(); function h(k) { $(a).stop(true, false).animate({ left: -860 * k }, 500); var m = $(a + " > li > div").eq(k); var l = m.parent().siblings().children(); l.css("border", "2px solid white"); var j = $(b + " li").eq(k); j.css("border-bottom", "3px solid green"); m.css("border", "2px solid #c8fcd6"); j.siblings().css("border-bottom", "3px solid #C8FCD6") } }; $.tl_slider() }); function numFour(a) { a = parseInt(a); if (a < 10) { return "000" + a } else { if (a < 100) { return "00" + a } else { if (a < 1000) { return "0" + a } else { return "0000" } } } } function bind_emotion() { var b = ""; for (var a = 1; a <= 55; a++) { b += '<li><img index="' + a + '" url="jx2/j_' + numFour(a) + '" src="/j/editor/dialogs/emotion/images/jx2/j_' + numFour(a) + '.gif"></li>' } $(".reply-emotion-content > ul > li > ul:eq(0)").html(b); b = ""; for (var a = 1; a <= 55; a++) { b += '<li><img index="' + a + '" url="bobo/b_' + numFour(a) + '" src="/j/editor/dialogs/emotion/images/bobo/b_' + numFour(a) + '.gif"></li>' } $(".reply-emotion-content > ul > li > ul:eq(1)").html(b); b = ""; for (var a = 1; a <= 20; a++) { b += '<li><img index="' + a + '" url="babycat/c_' + numFour(a) + '" src="/j/editor/dialogs/emotion/images/babycat/C_' + numFour(a) + '.gif"></li>' } $(".reply-emotion-content > ul > li > ul:eq(2)").html(b); b = ""; for (var a = 1; a <= 52; a++) { b += '<li><img index="' + a + '" url="ldw/w_' + numFour(a) + '" src="/j/editor/dialogs/emotion/images/ldw/w_' + numFour(a) + '.gif"></li>' } $(".reply-emotion-content > ul > li > ul:eq(3)").html(b); b = ""; for (var a = 1; a <= 40; a++) { b += '<li><img index="' + a + '" url="tsj/t_' + numFour(a) + '" src="/j/editor/dialogs/emotion/images/tsj/t_' + numFour(a) + '.gif"></li>' } $(".reply-emotion-content > ul > li > ul:eq(4)").html(b); b = ""; for (var a = 1; a <= 40; a++) { b += '<li><img index="' + a + '" url="youa/y_' + numFour(a) + '" src="/j/editor/dialogs/emotion/images/youa/y_' + numFour(a) + '.gif"></li>' } $(".reply-emotion-content > ul > li > ul:eq(5)").html(b) } $(function () { index = 1; $(".nav_" + index).bgPosition(nav_bg[index].x, nav_bg[index].y).stop().a({ left: 0 }, 150); var b = { min: 200, inDelay: 600, outDelay: 400, containerID: "toTops", scrollSpeed: 200, easingType: "linear" }; var a = b.containerID; $("#toTops").hide().click(function () { $("html, body").animate({ scrollTop: 0 }, 200) }); $(window).scroll(function () { var c = $(window).scrollTop(); if (typeof document.body.style.maxHeight === "undefined") { $(a).css({ position: "absolute", top: $(window).scrollTop() + $(window).height() - 50 }) } if (c > b.min) { $("#" + a).show().css("-webkit-transform", "scale(1)") } else { $("#" + a).show().css("-webkit-transform", "scale(0.01,0.01)") } }); $("#toTops .item3 a").hover(function () { $(this).a({ left: -80 }, 150) }, function () { $(this).a({ left: 0 }, 150) }) });
